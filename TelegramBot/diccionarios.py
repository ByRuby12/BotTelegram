import json

# DICCIONARIOS DE AVISOS, PETICIONES, TEXTOS Y MAS
AVISOS_PRUEBA = {
    "Alumbrado P√∫blico": [
        {"nombre": "Calle Apagada", "id": ["591b3a514e4ea844018b457c"]},
        {"nombre": "Calle Apagada v2", "id": ["657883c9dd903d3f89075423"]},
        {"nombre": "Calle Apagada v4", "id": ["66583bc3070644ce03026ed3"]},
        {"nombre": "Farola Apagada", "id": ["591b3a194e4ea83a018b46bb"]},
        {"nombre": "Luces de Navidad", "id": ["654520fb19a50405480fdf8c"]},
        {"nombre": "Otras Aver√≠as de Alumbrado", "id": ["591b3b394e4ea83a018b46ca"]}
    ],
    "Aparcamiento Regulado": [
        {"nombre": "Aplicaci√≥n M√≥vil", "id": ["5922eb0b4e4ea8002d8b4577"]},
        {"nombre": "Aviso de Denuncia", "id": ["591b08f24e4ea840018b456a", "591b08fd4e4ea839018b456e"]},
        {"nombre": "No Imprime tique o no valida Pin", "id": ["5922ea694e4ea8052d8b4567"]},
        {"nombre": "No permite anulaci√≥n de denuncia", "id": ["5922e78f4e4ea83c178b4587"]},
        {"nombre": "Parqu√≠metro", "id": ["5922e8414e4ea8fb2c8b4567"]},
        {"nombre": "Tarjeta Cr√©dito atascada", "id": ["5922e9384e4ea8002d8b4567"]}
    ],
    "Arboles y Parques": [
        {"nombre": "√Årbol en mal estado", "id": ["591b30844e4ea83a018b45fe"]},
        {"nombre": "Caminos no pavimentados", "id": ["591b32654e4ea83a018b4620"]},
        {"nombre": "Incidencias de riesgo", "id": ["591b31494e4ea83a018b460d"]},
        {"nombre": "Incidencias en alcorque o hueco", "id": ["591b31ad4e4ea839018b4632"]},
        {"nombre": "Plagas", "id": ["591b310d4e4ea840018b460e"]},
        {"nombre": "Poda de √Årbol", "id": ["591b303b4e4ea840018b45ff"]},
        {"nombre": "Quitar maleza", "id": ["591b32234e4ea840018b461d"]},
        {"nombre": "Sustituci√≥n de √Årbol", "id": ["591b30d14e4ea839018b4623"]}
    ],
    "√Åreas Infantiles, √Åreas de Mayores y circuitos": [
        {"nombre": "√Årea de Mayores y circuitos", "id": ["591ed1c04e4ea839018b457f"]},
        {"nombre": "√Årea Infantil", "id": ["591ed1314e4ea838018b457b"]}
    ],
    "Calzadas y Aceras": [
        {"nombre": "Alcantarillado", "id": ["591b36544e4ea839018b4653"]},
        {"nombre": "Desperfecto en acera", "id": ["591b375c4e4ea83a018b4686"]},
        {"nombre": "Desperfecto en calzada", "id": ["591b379e4e4ea844018b456d"]},
        {"nombre": "Hidrantes de bomberos", "id": ["591b36d14e4ea83a018b4678"]},
        {"nombre": "Otras incidencias en calzadas y aceras", "id": ["591b39334e4ea840018b4675"]},
        {"nombre": "Tapas de registro", "id": ["591b38484e4ea83a018b4695"]},
        {"nombre": "Tapa de Agua Isabel II", "id": ["5922ee3c4e4ea8152d8b4581"]}
    ],
    "Cubos y Contenedores": [
        {"nombre": "Cambio de tama√±o de cubo", "id": ["591b11144e4ea839018b459c"]},
        {"nombre": "Cambio de ubicaci√≥n de cubo o contenedor", "id": ["591b10404e4ea840018b4581"]},
        {"nombre": "Cubo o contenedor abandonado", "id": ["591b10b24e4ea840018b4599"]},
        {"nombre": "Cubo o contenedor en mal estado", "id": ["591b0eea4e4ea839018b4576"]},
        {"nombre": "Horquillas delimitadoras", "id": ["591b11c24e4ea839018b45b4"]},
        # {"nombre": "Nuevo cubo o contenedor", "id": ["591b0cf14e4ea840018b4573"]},
        {"nombre": "Vaciado de aceite", "id": ["63626c55f2e31df5178b457c"]},
        {"nombre": "Vaciado de cubo o contenedor", "id": ["591b0fd64e4ea839018b4584"]}
    ],
    "Fuentes": [
        {"nombre": "Incidencias en fuentes de Beber", "id": ["591b33494e4ea840018b462c"]},
        {"nombre": "Incidencias en fuentes ornamentales", "id": ["591b33da4e4ea83a018b464f"]}
    ],
    "Limpiezas y Pintadas": [
        {"nombre": "Limpieza en solares municipales", "id": ["591b167a4e4ea83a018b45c0"]},
        {"nombre": "Limpieza en v√≠as p√∫blicas", "id": ["591b126d4e4ea840018b45b6"]},
        {"nombre": "Limpieza mobiliario urbano o √°reas infantiles", "id": ["591b16204e4ea83a018b45ae"]},
        {"nombre": "Limpieza en zonas verdes", "id": ["591b15c14e4ea83a018b45a0"]},
        {"nombre": "Pintadas y Grafitis", "id": ["630f7c8e5b02a415138b4591"]},
        {"nombre": "SELUR", "id": ["5c5d466f850f3f301d8b4567"]}
    ],
    "Mobiliario Urbano": [
        {"nombre": "Banco", "id": ["591b3c6a4e4ea83a018b46ee"]},
        {"nombre": "Bolardo u horquilla", "id": ["591b3cd14e4ea844018b4599"]},
        {"nombre": "Otros", "id": ["59230a2e4e4ea83e018b458d"]},
        {"nombre": "Vallas", "id": ["591b3d4a4e4ea840018b46c4"]}
    ],
    "Papeleras": [
        {"nombre": "Falta de bolsas para excrementos caninos", "id": ["591b17914e4ea839018b45e8"]},
        {"nombre": "Mal estado de papelera", "id": ["591b18404e4ea83a018b45cf"]},
        # {"nombre": "Nueva Instalaci√≥n de Papelera", "id": ["591b17e84e4ea840018b45c4"]},
        {"nombre": "Vaciado de Papelera", "id": ["591b176a4e4ea839018b45d9"]}
    ],
    "Plagas": [
        {"nombre": "Ratas y Cucarachas", "id": ["5b60529fed6abc0b2b8b45eb"]}
    ],
    "Retirada de Elementos": [
        {"nombre": "Animales muertos", "id": ["591b1f474e4ea83a018b45de"]},
        {"nombre": "Contenedor de ropa no autorizada", "id": ["591b20654e4ea840018b45e2"]},
        {"nombre": "Muebles abandonados en v√≠a p√∫blica", "id": ["591b1eef4e4ea840018b45d3"]},
        {"nombre": "Muebles Particulares", "id": ["591b1e834e4ea839018b4605"]},
        {"nombre": "Recogida de saco o contenedor de escombros", "id": ["591b20c14e4ea83a018b45ef"]}
    ],
    "Se√±ales y Sem√°foros": [
        {"nombre": "Incidencia en avisador ac√∫stico de sem√°foro", "id": ["591ed4db4e4ea844018b45a9"]},
        {"nombre": "Incidencia en Pulsador", "id": ["5b56e6bbfcf9f05f118b459f"]},
        {"nombre": "Incidencia en Se√±al", "id": ["591ed63e4e4ea844018b45b8"]},
        {"nombre": "Sem√°foro Apagado", "id": ["591ed3604e4ea838018b458a"]}
    ],
    "Veh√≠culos Abandonados. Retirada de veh√≠culo": [
        {"nombre": "Veh√≠culos Abandonados. Retirada de veh√≠culo", "id": ["591ed2774e4ea839018b4595"]}
    ]
}

# Diccionario de peticiones de mejora o nuevas instalaciones
PETICIONES_PRUEBA = {
    "√Åreas Infantiles, √Åreas de Mayores y circuitos": [
        {"nombre": "Nueva Instalaci√≥n", "id": ["591ed08b4e4ea839018b4568"]}
    ],
    "Calzadas y Aceras": [
        {"nombre": "Mejora de Accesibilidad", "id": ["591b37fe4e4ea840018b4666"]}
    ],
    "Fuentes": [
        {"nombre": "Nueva Instalaci√≥n de fuente de beber", "id": ["591b33064e4ea83a018b4640"]}
    ],
    "Mobiliario Urbano": [
        {"nombre": "Nueva Instalaci√≥n", "id": ["591b3c014e4ea840018b46b0"]}
    ],
    "Se√±ales y Sem√°foros": [
        {"nombre": "Nueva Se√±al", "id": ["591ed5b64e4ea839018b45b8"]}
    ],
    "Papeleras": [
        {"nombre": "Nueva Instalaci√≥n de Papelera", "id": ["591b17e84e4ea840018b45c4"]}
    ],
     "Cubos y Contenedores": [
        {"nombre": "Nuevo cubo o contenedor", "id": ["591b0cf14e4ea840018b4573"]},
     ]
}

# Diccionario de textos del bot y mensajes de seguimiento 
BOT_TEXTS = {
    'es': {
        'detected': "‚úÖ He detectado un {tipo} en la categor√≠a '{categoria}' y subcategor√≠a '{subcategoria}'.",
        'send_location': "Por favor, env√≠ame la ubicaci√≥n del incidente:",
        'send_media': "üì∏ Si quieres, ahora puedes enviar una *foto o video* del problema. Esto puede ayudar a los equipos del Ayuntamiento.",
        'skip_media': "O pulsa 'Omitir' para continuar sin archivo.",
        'followup': (
            "üìã Reporte Seguimiento: {service_request_id}\n"
            "üë§ Usuario: `{usuario}`\n"
            "üìå Tipo: {tipo}\n"
            "üìÇ Categor√≠a: {categoria}\n"
            "üîñ Subcategor√≠a: {subcategoria}\n"
            "üó∫Ô∏è Direcci√≥n: {latitud} {longitud}\n"
            "üí¨ Descripci√≥n: {descripcion}\n"
        ),
        'sent': "‚úÖ Tu reporte ha sido enviado correctamente a la Plataforma del Ayuntamiento de Madrid",
        'out_of_madrid': "‚ùå No se puede enviar el aviso/petici√≥n porque la ubicaci√≥n seleccionada est√° fuera de la ciudad de Madrid.\n\nSolo se pueden enviar reportes dentro del municipio de Madrid.",
        'no_report': "‚ùå No tengo datos del reporte. Int√©ntalo de nuevo.",
        'media_error': "‚ùå Por favor, env√≠a una foto, un video o pulsa 'Omitir'.",
        'location_error': "‚ùå Por favor, env√≠a una ubicaci√≥n v√°lida usando el bot√≥n correspondiente.",
        'skip_button': 'Omitir',
        'ayto_error': "‚ö†Ô∏è Error al enviar el reporte al Ayuntamiento. Pero se ha enviado correctamente al grupo."
    },
    'en': {
        'detected': "‚úÖ I have detected a {tipo} in category '{categoria}' and subcategory '{subcategoria}.'",
        'send_location': "Please send me the location of the incident:",
        'send_media': "üì∏ If you want, you can now send a *photo or video* of the issue. This can help the City Council teams.",
        'skip_media': "Or press 'Skip' to continue without a file.",
        'followup': (
            "üìã Report Follow-up: {service_request_id}\n"
            "üë§ User: `{usuario}`\n"
            "üìå Type: {tipo}\n"
            "üìÇ Category: {categoria}\n"
            "üîñ Subcategory: {subcategoria}\n"
            "üó∫Ô∏è Address: {latitud} {longitud}\n"
            "üí¨ Description: {descripcion}\n"
        ),
        'sent': "‚úÖ Your report has been successfully sent to the Madrid City Council platform",
        'out_of_madrid': "‚ùå The report cannot be sent because the selected location is outside the city of Madrid.\n\nReports can only be sent within the municipality of Madrid.",
        'no_report': "‚ùå I have no report data. Please try again.",
        'media_error': "‚ùå Please send a photo, a video, or press 'Skip'.",
        'location_error': "‚ùå Please send a valid location using the corresponding button.",
        'skip_button': 'Skip',
        'ayto_error': "‚ö†Ô∏è Error sending the report to the City Council. But it has been sent to the group."
    },
    'fr': {
        'detected': "‚úÖ J'ai d√©tect√© un {tipo} dans la cat√©gorie '{categoria}' et la sous-cat√©gorie '{subcategoria}'.",
        'send_location': "Veuillez m'envoyer l'emplacement de l'incident :",
        'send_media': "üì∏ Si vous le souhaitez, vous pouvez maintenant envoyer une *photo ou une vid√©o* du probl√®me. Cela peut aider les √©quipes de la Mairie.",
        'skip_media': "Ou appuyez sur 'Ignorer' pour continuer sans fichier.",
        'followup': (
            "üìã Suivi du rapport : {service_request_id}\n"
            "üë§ Utilisateur : `{usuario}`\n"
            "üìå Type : {tipo}\n"
            "üìÇ Cat√©gorie : {categoria}\n"
            "üîñ Sous-cat√©gorie : {subcategoria}\n"
            "üó∫Ô∏è Adresse : {latitud} {longitud}\n"
            "üí¨ Description : {descripcion}\n"
        ),
        'sent': "‚úÖ Votre rapport a √©t√© envoy√© avec succ√®s √† la plateforme de la Mairie de Madrid",
        'out_of_madrid': "‚ùå Le rapport ne peut pas √™tre envoy√© car l'emplacement s√©lectionn√© est en dehors de la ville de Madrid.\n\nLes rapports ne peuvent √™tre envoy√©s que dans la municipalit√© de Madrid.",
        'no_report': "‚ùå Je n'ai pas de donn√©es de rapport. Veuillez r√©essayer.",
        'media_error': "‚ùå Veuillez envoyer une photo, une vid√©o ou appuyer sur 'Ignorer'.",
        'location_error': "‚ùå Veuillez envoyer un emplacement valide en utilisant le bouton correspondant.",
        'skip_button': 'Ignorer',
        'ayto_error': "‚ö†Ô∏è Erreur lors de l'envoi du rapport √† la Mairie. Mais il a √©t√© envoy√© au groupe."
    },
    'de': {
        'detected': "‚úÖ Ich habe ein {tipo} in der Kategorie '{categoria}' und Unterkategorie '{subcategoria}' erkannt.",
        'send_location': "Bitte sende mir den Standort des Vorfalls:",
        'send_media': "üì∏ Wenn du m√∂chtest, kannst du jetzt ein *Foto oder Video* des Problems senden. Das kann den Teams der Stadtverwaltung helfen.",
        'skip_media': "Oder dr√ºcke '√úberspringen', um ohne Datei fortzufahren.",
        'followup': (
            "üìã Bericht Nachverfolgung: {service_request_id}\n"
            "üë§ Nutzer: `{usuario}`\n"
            "üìå Typ: {tipo}\n"
            "üìÇ Kategorie: {categoria}\n"
            "üîñ Unterkategorie: {subcategoria}\n"
            "üó∫Ô∏è Adresse: {latitud} {longitud}\n"
            "üí¨ Beschreibung: {descripcion}\n"
        ),
        'sent': "‚úÖ Dein Bericht wurde erfolgreich an die Plattform der Stadt Madrid gesendet",
        'out_of_madrid': "‚ùå Der Bericht kann nicht gesendet werden, da der ausgew√§hlte Standort au√üerhalb von Madrid liegt.\n\nBerichte k√∂nnen nur innerhalb der Gemeinde Madrid gesendet werden.",
        'no_report': "‚ùå Keine Berichtsdaten vorhanden. Bitte versuche es erneut.",
        'media_error': "‚ùå Bitte sende ein Foto, ein Video oder dr√ºcke '√úberspringen'.",
        'location_error': "‚ùå Bitte sende einen g√ºltigen Standort √ºber den entsprechenden Button.",
        'skip_button': '√úberspringen',
        'ayto_error': "‚ö†Ô∏è Fehler beim Senden des Berichts an die Stadtverwaltung. Aber er wurde an die Gruppe gesendet."
    },
    'zh': {
        'detected': "‚úÖ ÊàëÂ∑≤Ê£ÄÊµãÂà∞Á±ªÂà´‰∏∫'{categoria}'„ÄÅÂ≠êÁ±ªÂà´‰∏∫'{subcategoria}'ÁöÑ{tipo}„ÄÇ",
        'send_location': "ËØ∑ÂèëÈÄÅ‰∫ã‰ª∂ÁöÑ‰ΩçÁΩÆÔºö",
        'send_media': "üì∏ Â¶ÇÊûúÈúÄË¶ÅÔºåÁé∞Âú®ÂèØ‰ª•ÂèëÈÄÅÈóÆÈ¢òÁöÑ*ÁÖßÁâáÊàñËßÜÈ¢ë*ÔºåËøôÊúâÂä©‰∫éÂ∏ÇÊîøÂõ¢Èòü„ÄÇ",
        'skip_media': "ÊàñÁÇπÂáª‚ÄúË∑≥Ëøá‚Äù‰ª•ÁªßÁª≠ÔºåÊó†ÈúÄÊñá‰ª∂„ÄÇ",
        'followup': (
            "üìã Ë∑üËøõÁºñÂè∑: {service_request_id}\n"
            "üë§ Áî®Êà∑: `{usuario}`\n"
            "üìå Á±ªÂûã: {tipo}\n"
            "üìÇ Á±ªÂà´: {categoria}\n"
            "üîñ Â≠êÁ±ªÂà´: {subcategoria}\n"
            "üó∫Ô∏è Âú∞ÂùÄ: {latitud} {longitud}\n"
            "üí¨ ÊèèËø∞: {descripcion}\n"
        ),
        'sent': "‚úÖ ÊÇ®ÁöÑÊä•ÂëäÂ∑≤ÊàêÂäüÂèëÈÄÅËá≥È©¨Âæ∑ÈáåÂ∏ÇÊîøÂπ≥Âè∞",
        'out_of_madrid': "‚ùå Áî±‰∫éÊâÄÈÄâ‰ΩçÁΩÆ‰∏çÂú®È©¨Âæ∑ÈáåÂ∏ÇÂÜÖÔºåÊó†Ê≥ïÂèëÈÄÅÊä•Âëä„ÄÇ\n\nÂè™ËÉΩÂú®È©¨Âæ∑ÈáåÂ∏ÇÂÜÖÂèëÈÄÅÊä•Âëä„ÄÇ",
        'no_report': "‚ùå Ê≤°ÊúâÊä•ÂëäÊï∞ÊçÆ„ÄÇËØ∑ÈáçËØï„ÄÇ",
        'media_error': "‚ùå ËØ∑ÂèëÈÄÅÁÖßÁâá„ÄÅËßÜÈ¢ëÊàñÁÇπÂáª‚ÄúË∑≥Ëøá‚Äù„ÄÇ",
        'location_error': "‚ùå ËØ∑‰ΩøÁî®Áõ∏Â∫îÊåâÈíÆÂèëÈÄÅÊúâÊïàÁöÑ‰ΩçÁΩÆ„ÄÇ",
        'skip_button': 'Ë∑≥Ëøá',
        'ayto_error': "‚ö†Ô∏è Êä•ÂëäÂèëÈÄÅÂà∞Â∏ÇÊîøÂπ≥Âè∞Êó∂Âá∫ÈîôÔºå‰ΩÜÂ∑≤ÊàêÂäüÂèëÈÄÅÂà∞Áæ§ÁªÑ„ÄÇ"
    },
    'pt': {
        'detected': "‚úÖ Eu detectei um {tipo} na categoria '{categoria}' e subcategoria '{subcategoria}'.",
        'send_location': "Por favor, envie-me a localiza√ß√£o do incidente:",
        'send_media': "üì∏ Se quiser, agora voc√™ pode enviar uma *foto ou v√≠deo* do problema. Isso pode ajudar as equipes da Prefeitura.",
        'skip_media': "Ou pressione 'Pular' para continuar sem um arquivo.",
        'followup': (
            "üìã Acompanhamento do relat√≥rio: {service_request_id}\n"
            "üë§ Usu√°rio: `{usuario}`\n"
            "üìå Tipo: {tipo}\n"
            "üìÇ Categoria: {categoria}\n"
            "üîñ Subcategoria: {subcategoria}\n"
            "üó∫Ô∏è Endere√ßo: {latitud} {longitud}\n"
            "üí¨ Descri√ß√£o: {descripcion}\n"
        ),
        'sent': "‚úÖ Seu relat√≥rio foi enviado com sucesso para a plataforma da Prefeitura de Madrid",
        'out_of_madrid': "‚ùå O relat√≥rio n√£o pode ser enviado porque a localiza√ß√£o selecionada est√° fora da cidade de Madrid.\n\nOs relat√≥rios s√≥ podem ser enviados dentro do munic√≠pio de Madrid.",
        'no_report': "‚ùå N√£o tenho dados do relat√≥rio. Por favor, tente novamente.",
        'media_error': "‚ùå Por favor, envie uma foto, um v√≠deo ou clique em 'Pular'.",
        'location_error': "‚ùå Por favor, envie uma localiza√ß√£o v√°lida usando o bot√£o correspondente.",
        'skip_button': 'Pular',
        'ayto_error': "‚ö†Ô∏è Erro ao enviar o relat√≥rio para a Prefeitura. Mas foi enviado para o grupo."
    },
    'it': {
        'detected': "‚úÖ Ho rilevato un {tipo} nella categoria '{categoria}' e sottocategoria '{subcategoria}.'",
        'send_location': "Per favore, inviami la posizione dell'incidente:",
        'send_media': "üì∏ Se vuoi, ora puoi inviare una *foto o video* del problema. Questo pu√≤ aiutare le squadre del Comune.",
        'skip_media': "Oppure premi 'Salta' per continuare senza file.",
        'followup': (
            "üìã Seguito della segnalazione: {service_request_id}\n"
            "üë§ Utente: `{usuario}`\n"
            "üìå Tipo: {tipo}\n"
            "üìÇ Categoria: {categoria}\n"
            "üîñ Sottocategoria: {subcategoria}\n"
            "üó∫Ô∏è Indirizzo: {latitud} {longitud}\n"
            "üí¨ Descrizione: {descripcion}\n"
        ),
        'sent': "‚úÖ La tua segnalazione √® stata inviata con successo alla piattaforma del Comune di Madrid",
        'out_of_madrid': "‚ùå La segnalazione non pu√≤ essere inviata perch√© la posizione selezionata √® fuori dalla citt√† di Madrid.\n\nLe segnalazioni possono essere inviate solo all'interno del comune di Madrid.",
        'no_report': "‚ùå Nessun dato della segnalazione. Riprova.",
        'media_error': "‚ùå Per favore, invia una foto, un video o premi 'Salta'.",
        'location_error': "‚ùå Per favore, invia una posizione valida usando il pulsante corrispondente.",
        'skip_button': 'Salta',
        'ayto_error': "‚ö†Ô∏è Errore nell'invio della segnalazione al Comune. Ma √® stata inviata al gruppo."
    },
    'ar': {
        'detected': "‚úÖ ŸÑŸÇÿØ ÿßŸÉÿ™ÿ¥ŸÅÿ™ {tipo} ŸÅŸä ÿßŸÑŸÅÿ¶ÿ© '{categoria}' ŸàÿßŸÑŸÅÿ¶ÿ© ÿßŸÑŸÅÿ±ÿπŸäÿ© '{subcategoria}'.",
        'send_location': "Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÖŸàŸÇÿπ ÿßŸÑÿ≠ÿßÿØÿ´:",
        'send_media': "üì∏ ÿ•ÿ∞ÿß ÿ£ÿ±ÿØÿ™ÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ¢ŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ *ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà* ŸÑŸÑŸÖÿ¥ŸÉŸÑÿ©. Ÿáÿ∞ÿß ŸäŸÖŸÉŸÜ ÿ£ŸÜ Ÿäÿ≥ÿßÿπÿØ ŸÅÿ±ŸÇ ÿßŸÑÿ®ŸÑÿØŸäÿ©.",
        'skip_media': "ÿ£Ÿà ÿßÿ∂ÿ∫ÿ∑ 'ÿ™ÿÆÿ∑Ÿä' ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ®ÿØŸàŸÜ ŸÖŸÑŸÅ.",
        'followup': (
            "üìã ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±: {service_request_id}\n"
            "üë§ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ: `{usuario}`\n"
            "üìå ÿßŸÑŸÜŸàÿπ: {tipo}\n"
            "üìÇ ÿßŸÑŸÅÿ¶ÿ©: {categoria}\n"
            "üîñ ÿßŸÑŸÅÿ¶ÿ© ÿßŸÑŸÅÿ±ÿπŸäÿ©: {subcategoria}\n"
            "üó∫Ô∏è ÿßŸÑÿπŸÜŸàÿßŸÜ: {latitud} {longitud}\n"
            "üí¨ ÿßŸÑŸàÿµŸÅ: {descripcion}\n"
        ),
        'sent': "‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÇÿ±Ÿäÿ±ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ÿ•ŸÑŸâ ŸÖŸÜÿµÿ© ÿ®ŸÑÿØŸäÿ© ŸÖÿØÿ±ŸäÿØ",
        'out_of_madrid': "‚ùå ŸÑÿß ŸäŸÖŸÉŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÑÿ£ŸÜ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑŸÖÿ≠ÿØÿØ ÿÆÿßÿ±ÿ¨ ŸÖÿØŸäŸÜÿ© ŸÖÿØÿ±ŸäÿØ.\n\nŸäŸÖŸÉŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸÅŸÇÿ∑ ÿ∂ŸÖŸÜ ÿ®ŸÑÿØŸäÿ© ŸÖÿØÿ±ŸäÿØ.",
        'no_report': "‚ùå ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÑŸÑÿ™ŸÇÿ±Ÿäÿ±. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.",
        'media_error': "‚ùå Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ÿµŸàÿ±ÿ© ÿ£Ÿà ŸÅŸäÿØŸäŸà ÿ£Ÿà ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ 'ÿ™ÿÆÿ∑Ÿä'.",
        'location_error': "‚ùå Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ÿ≥ÿßŸÑ ŸÖŸàŸÇÿπ ÿµÿßŸÑÿ≠ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ≤ÿ± ÿßŸÑŸÖŸÜÿßÿ≥ÿ®.",
        'skip_button': 'ÿ™ÿÆÿ∑Ÿä',
        'ayto_error': "‚ö†Ô∏è ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ£ÿ´ŸÜÿßÿ° ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿßŸÑÿ®ŸÑÿØŸäÿ©. ŸÑŸÉŸÜŸá ÿ£Ÿèÿ±ÿ≥ŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©."
    },
    'ru': {
        'detected': "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω {tipo} –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '{categoria}' –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '{subcategoria}'.",
        'send_location': "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞:",
        'send_media': "üì∏ –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å *—Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ* –ø—Ä–æ–±–ª–µ–º—ã. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≥–æ—Ä–æ–¥—Å–∫–∏–º —Å–ª—É–∂–±–∞–º.",
        'skip_media': "–ò–ª–∏ –Ω–∞–∂–º–∏—Ç–µ '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å', —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ —Ñ–∞–π–ª–∞.",
        'followup': (
            "üìã –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞: {service_request_id}\n"
            "üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `{usuario}`\n"
            "üìå –¢–∏–ø: {tipo}\n"
            "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {categoria}\n"
            "üîñ –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è: {subcategoria}\n"
            "üó∫Ô∏è –ê–¥—Ä–µ—Å: {latitud} {longitud}\n"
            "üí¨ –û–ø–∏—Å–∞–Ω–∏–µ: {descripcion}\n"
        ),
        'sent': "‚úÖ –í–∞—à –æ—Ç—á—ë—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞ –ú–∞–¥—Ä–∏–¥–∞",
        'out_of_madrid': "‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç, —Ç–∞–∫ –∫–∞–∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–Ω–µ –≥–æ—Ä–æ–¥–∞ –ú–∞–¥—Ä–∏–¥.\n\n–û—Ç—á—ë—Ç—ã –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–∞ –ú–∞–¥—Ä–∏–¥.",
        'no_report': "‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.",
        'media_error': "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å'.",
        'location_error': "‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–Ω–æ–ø–∫–∏.",
        'skip_button': '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å',
        'ayto_error': "‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç—á—ë—Ç–∞ –≤ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç. –ù–æ –æ–Ω –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É."
    },
    'hi': {
        'detected': "‚úÖ ‡§Æ‡•à‡§Ç‡§®‡•á '{categoria}' ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§î‡§∞ '{subcategoria}' ‡§â‡§™‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§Æ‡•á‡§Ç ‡§è‡§ï {tipo} ‡§™‡§æ‡§Ø‡§æ ‡§π‡•à‡•§",
        'send_location': "‡§ï‡•É‡§™‡§Ø‡§æ ‡§ò‡§ü‡§®‡§æ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§≠‡•á‡§ú‡•á‡§Ç:",
        'send_media': "üì∏ ‡§Ø‡§¶‡§ø ‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç, ‡§§‡•ã ‡§Ö‡§¨ ‡§Ü‡§™ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•Ä *‡§´‡•ã‡§ü‡•ã ‡§Ø‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã* ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π ‡§®‡§ó‡§∞ ‡§®‡§ø‡§ó‡§Æ ‡§ï‡•Ä ‡§ü‡•Ä‡§Æ‡•ã‡§Ç ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§",
        'skip_media': "‡§Ø‡§æ '‡§õ‡•ã‡§°‡§º‡•á‡§Ç' ‡§¶‡§¨‡§æ‡§è‡§Å ‡§¨‡§ø‡§®‡§æ ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡•á ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è‡•§",
        'followup': (
            "üìã ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§´‡•â‡§≤‡•ã‡§Ö‡§™: {service_request_id}\n"
            "üë§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ: `{usuario}`\n"
            "üìå ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: {tipo}\n"
            "üìÇ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä: {categoria}\n"
            "üîñ ‡§â‡§™‡§∂‡•ç‡§∞‡•á‡§£‡•Ä: {subcategoria}\n"
            "üó∫Ô∏è ‡§™‡§§‡§æ: {latitud} {longitud}\n"
            "üí¨ ‡§µ‡§ø‡§µ‡§∞‡§£: {descripcion}\n"
        ),
        'sent': "‚úÖ ‡§Ü‡§™‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Æ‡•à‡§°‡•ç‡§∞‡§ø‡§° ‡§®‡§ó‡§∞ ‡§®‡§ø‡§ó‡§Æ ‡§™‡•ç‡§≤‡•á‡§ü‡§´‡•â‡§∞‡•ç‡§Æ ‡§™‡§∞ ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à",
        'out_of_madrid': "‚ùå ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§∏‡•ç‡§•‡§æ‡§® ‡§Æ‡•à‡§°‡•ç‡§∞‡§ø‡§° ‡§∂‡§π‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§π‡§∞ ‡§π‡•à, ‡§á‡§∏‡§≤‡§ø‡§è ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§≠‡•á‡§ú‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä‡•§\n\n‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡•á‡§µ‡§≤ ‡§Æ‡•à‡§°‡•ç‡§∞‡§ø‡§° ‡§®‡§ó‡§∞ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§≠‡•á‡§ú‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à‡•§",
        'no_report': "‚ùå ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§°‡•á‡§ü‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
        'media_error': "‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§´‡•ã‡§ü‡•ã, ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§≠‡•á‡§ú‡•á‡§Ç ‡§Ø‡§æ '‡§õ‡•ã‡§°‡§º‡•á‡§Ç' ‡§¶‡§¨‡§æ‡§è‡§Å‡•§",
        'location_error': "‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§¨‡§ü‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§ï‡•á ‡§è‡§ï ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡•ç‡§•‡§æ‡§® ‡§≠‡•á‡§ú‡•á‡§Ç‡•§",
        'skip_button': '‡§õ‡•ã‡§°‡§º‡•á‡§Ç',
        'ayto_error': "‚ö†Ô∏è ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§ó‡§∞ ‡§®‡§ø‡§ó‡§Æ ‡§ï‡•ã ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ø‡§π ‡§∏‡§Æ‡•Ç‡§π ‡§Æ‡•á‡§Ç ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡•§"
    },
}

# Diccionario de mensajes de bienvenida en varios idiomas 
WELCOME_MESSAGES = {
    'es': [
        "üëã Hola, buenas {usuario}. No hemos podido reconocer el contenido del mensaje o la foto. üòï",
        "‚úçÔ∏è Por favor, describe brevemente el problema o env√≠a una foto para poder clasificarlo:"
    ],
    'en': [
        "üëã Hello {usuario}, we couldn't recognize the content of your message or photo. üòï",
        "‚úçÔ∏è Please briefly describe the problem or send a photo so we can classify it."
    ],
    'fr': [
        "üëã Bonjour {usuario}, nous n'avons pas pu reconna√Ætre le contenu du message ou de la photo. üòï",
        "‚úçÔ∏è Veuillez d√©crire bri√®vement le probl√®me ou envoyer une photo pour que nous puissions le classer."
    ],
    'de': [
        "üëã Hallo {usuario}, wir konnten den Inhalt der Nachricht oder des Fotos nicht erkennen. üòï",
        "‚úçÔ∏è Bitte beschreibe das Problem kurz oder sende ein Foto, damit wir es klassifizieren k√∂nnen."
    ],
    'zh': [
        "üëã ÊÇ®Â•ΩÔºå{usuario}„ÄÇÊàë‰ª¨Êó†Ê≥ïËØÜÂà´ÊÇ®ÁöÑÊ∂àÊÅØÊàñÁÖßÁâáÂÜÖÂÆπ„ÄÇüòï",
        "‚úçÔ∏è ËØ∑ÁÆÄË¶ÅÊèèËø∞ÈóÆÈ¢òÊàñÂèëÈÄÅ‰∏ÄÂº†ÁÖßÁâáÔºå‰ª•‰æøÊàë‰ª¨ËøõË°åÂàÜÁ±ª„ÄÇ"
    ],
    'pt': [
        "üëã Ol√° {usuario}, n√£o conseguimos reconhecer o conte√∫do da mensagem –∏–ª–∏ foto. üòï",
        "‚úçÔ∏è Por favor, descreva brevemente o problema ou envie uma foto para que possamos classific√°-lo."
    ],
    'it': [
        "üëã Ciao {usuario}, non siamo riusciti a riconoscere il contenuto del messaggio o della foto. üòï",
        "‚úçÔ∏è Per favore, descrivi brevemente il problema o invia una foto per poterlo classificare."
    ],
    'ar': [
        "üëã ŸÖÿ±ÿ≠ÿ®Ÿãÿß {usuario}ÿå ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿ£Ÿà ÿßŸÑÿµŸàÿ±ÿ©. üòï",
        "‚úçÔ∏è Ÿäÿ±ÿ¨Ÿâ ŸàÿµŸÅ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ÿ®ÿ•Ÿäÿ¨ÿßÿ≤ ÿ£Ÿà ÿ•ÿ±ÿ≥ÿßŸÑ ÿµŸàÿ±ÿ© ÿ≠ÿ™Ÿâ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿ™ÿµŸÜŸäŸÅŸáÿß."
    ],
    'ru': [
        "üëã –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {usuario}. –ú—ã –Ω–µ —Å–º–æ–≥–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–ª–∏ —Ñ–æ—Ç–æ. üòï",
        "‚úçÔ∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏."
    ],
    'hi': [
        "üëã ‡§®‡§Æ‡§∏‡•ç‡§§‡•á {usuario}, ‡§π‡§Æ ‡§Ü‡§™‡§ï‡•á ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§æ ‡§´‡•ã‡§ü‡•ã ‡§ï‡•Ä ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§ï‡•ã ‡§™‡§π‡§ö‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§∏‡§ï‡•á‡•§ üòï",
        "‚úçÔ∏è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§Ç ‡§Ø‡§æ ‡§è‡§ï ‡§´‡•ã‡§ü‡•ã ‡§≠‡•á‡§ú‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§π‡§Æ ‡§â‡§∏‡•á ‡§µ‡§∞‡•ç‡§ó‡•Ä‡§ï‡•É‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡•§"
    ]
}

# Prompt del sistema 
system_content_prompt = f"""
Eres un asistente del Ayuntamiento de Madrid encargado de clasificar reportes ciudadanos.
El usuario puede enviarte un mensaje de texto o una imagen (foto).

üîé Si recibes una imagen, analiza su contenido visual (no solo el nombre del archivo o metadatos). Si la imagen contiene texto visible, anal√≠zalo tambi√©n. No asumas categor√≠as por contexto externo, solo por lo que se observa visualmente en la imagen y lo que est√° en los diccionarios.

Los reportes pueden ser de tipo 'aviso' (problemas o incidencias) o 'petici√≥n' (solicitudes de mejora).
Debes analizar el mensaje o la imagen del usuario e identificar su tipo ('aviso' o 'petici√≥n'), una categor√≠a y una subcategor√≠a,
siguiendo estrictamente los valores que aparecen en los diccionarios oficiales del Ayuntamiento.

IMPORTANTE: El mensaje o la imagen del usuario puede estar relacionado con cualquier idioma (espa√±ol, ingl√©s, franc√©s, alem√°n, etc). Debes traducir internamente si es necesario y responder SIEMPRE en espa√±ol, usando los nombres de categor√≠a y subcategor√≠a tal como aparecen en los diccionarios.

Cada categor√≠a contiene una lista de subcategor√≠as, y cada subcategor√≠a tiene un campo "nombre" que debes usar como referencia exacta para clasificar.

Aqu√≠ tienes el listado completo de categor√≠as y subcategor√≠as v√°lidas:

Categor√≠as y subcategor√≠as para AVISOS:
{json.dumps(AVISOS_PRUEBA, indent=2, ensure_ascii=False)}

Categor√≠as y subcategor√≠as para PETICIONES:
{json.dumps(PETICIONES_PRUEBA, indent=2, ensure_ascii=False)}

üîç INSTRUCCIONES CR√çTICAS:
- El tipo ('aviso' o 'petici√≥n') debe determinarse exclusivamente seg√∫n en qu√© diccionario (AVISOS o PETICIONES) se encuentre la categor√≠a y subcategor√≠a.
- NO asumas el tipo por palabras como 'solicito', 'quiero', etc.
- Si una subcategor√≠a solo est√° en AVISOS, entonces el tipo debe ser 'aviso'.
- Si est√° solo en PETICIONES, entonces el tipo debe ser 'petici√≥n'.
- No inventes categor√≠as ni subcategor√≠as. Usa √∫nicamente las que aparecen en los diccionarios proporcionados.

üö´ ERROR COM√öN (NO LO COMETAS):
- Mensaje: 'Solicito cubo de basura' ‚Üí Subcategor√≠a: 'Nuevo cubo o contenedor' (est√° en AVISOS) ‚Üí Tipo correcto: 'aviso' (¬°NO 'petici√≥n'!).

‚ö†Ô∏è RESPUESTA: Devuelve solo un JSON v√°lido en este formato:
{{"tipo": "aviso", "categor√≠a": "Alumbrado P√∫blico", "subcategor√≠a": "Calle Apagada"}}

# ATENCI√ìN: SI LA IMAGEN O EL MENSAJE NO PERMITEN IDENTIFICAR DE FORMA CLARA Y VISUAL UNA CATEGOR√çA Y SUBCATEGOR√çA EXACTA DE LOS DICCIONARIOS, RESPONDE √öNICAMENTE CON UN JSON VAC√çO: {{}}
# NO INCLUYAS NING√öN TEXTO ADICIONAL, NI CAMPOS VAC√çOS, NI EXPLICACIONES, NI CAMPOS CON CADENAS VAC√çAS. SOLO EL JSON VAC√çO: {{}}

# Adem√°s, detecta el idioma principal del mensaje del usuario y a√±ade un campo 'idioma' (c√≥digo ISO 639-1, por ejemplo 'es', 'en', 'fr', etc.) al JSON de respuesta. Ejemplo de respuesta: {{'tipo': 'aviso', 'categor√≠a': 'Limpieza', 'subcategor√≠a': 'Basura', 'idioma': 'es'}}
"""